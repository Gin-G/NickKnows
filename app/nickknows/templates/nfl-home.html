{# 
    Example: nfl-home.html refactored
    Before: ~100 lines of duplicated boilerplate + content
    After: Just the content, everything else inherited
#}
{% extends 'nfl-base.html' %}

{% block title %}NFL Analytics | Nick Knows{% endblock %}
{% block og_title %}NFL Stat Leaders{% endblock %}

{% block nfl_content %}
<div class="page-header" style="padding-top: var(--space-lg);">
    <h1 class="page-header__title">NFL Stat Leaders</h1>
    <p class="page-header__subtitle">{{ selected_year }} Season</p>
</div>

<div style="display: flex; gap: var(--space-md); align-items: center; margin-bottom: var(--space-xl); flex-wrap: wrap;">
    <form action="{{ url_for('NFLupdate') }}" style="display: inline;">
        <input type="hidden" name="year" value="{{ selected_year }}">
        <button type="submit" class="btn btn--ghost">Update {{ selected_year }} Data</button>
    </form>

    <form id="yearForm" action="{{ url_for('set_year') }}" method="POST" style="display: inline;">
        <select name="year" id="yearSelect" onchange="this.form.submit()" 
                style="padding: 10px 16px; border-radius: var(--radius-pill); background: var(--surface); 
                       border: 1px solid var(--border); color: var(--text); font-family: inherit; font-size: 14px; cursor: pointer;">
            {% for year in years %}
            <option value="{{ year }}" {% if year == selected_year %}selected{% endif %}>{{ year }}</option>
            {% endfor %}
        </select>
    </form>
</div>

{% if pass_yards_data %}
<div class="feature-grid" style="grid-template-columns: repeat(auto-fit, minmax(380px, 1fr)); margin-bottom: var(--space-2xl);">
    {% set stat_tables = [
        ('Passing Yards', pass_yards_data),
        ('Passing TDs', pass_td_data),
        ('Rushing Yards', rush_yards_data),
        ('Rushing TDs', rush_td_data),
        ('Receiving Yards', rec_yards_data),
        ('Receiving TDs', rec_td_data),
    ] %}

    {% for label, data in stat_tables %}
    <div class="fade-in">
        <h3 style="font-size: 14px; font-weight: 600; margin-bottom: var(--space-md); color: var(--text-muted); 
                   letter-spacing: 0.06em; text-transform: uppercase;">{{ label }}</h3>
        <div class="table-wrapper">
            {{ data | safe }}
        </div>
    </div>
    {% endfor %}
</div>
{% else %}
<div style="text-align: center; padding: var(--space-3xl) 0; color: var(--text-muted);">
    <p style="font-size: 18px;">Data is loading...</p>
    <p style="font-size: 14px; margin-top: var(--space-sm);">Refresh in a few minutes after the update completes.</p>
</div>
{% endif %}
{% endblock %}