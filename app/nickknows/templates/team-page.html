<!DOCTYPE html>
<html>
<head>
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <script>
        function toggleMenu() {
            const navLinks = document.getElementById('navLinks');
            navLinks.classList.toggle('active');
        }
    </script>
    
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YMZBTB7JST"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-YMZBTB7JST');
    </script>
    
    <!-- Google Adsense tag -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5450333101463376" crossorigin="anonymous"></script>
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="{{url_for('static', filename='style.css')}}" type="text/css">
    <script src="https://code.jquery.com/jquery-3.6.1.min.js" integrity="sha256-o88AwQnZB+VDvE9tvIXrMQaPlFFSUTR+nldQm1LuPXQ=" crossorigin="anonymous"></script>
    <script>
        $(function(){
            $('#nfl_navbar').load("{{ url_for('nfl_navbar') }}")
        })
        $(function(){
            $('#header').load("{{ url_for('header') }}")
        })
    </script>
    
    <style>
        .team-header {
            background: linear-gradient(135deg, {{ team_info.primary_color }} 0%, {{ team_info.secondary_color or team_info.primary_color }} 100%);
            color: white;
            padding: 30px;
            border-radius: 10px;
            margin-bottom: 30px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        
        .team-header-content {
            display: flex;
            align-items: center;
            gap: 30px;
        }
        
        .team-logo-large {
            width: 120px;
            height: 120px;
            object-fit: contain;
            background: rgba(255,255,255,0.2);
            border-radius: 10px;
            padding: 10px;
        }
        
        .team-info-text h1 {
            margin: 0;
            font-size: 2.5em;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        .team-info-text .division {
            font-size: 1.2em;
            opacity: 0.9;
            margin: 5px 0;
        }
        
        .team-info-text .record {
            font-size: 1.5em;
            font-weight: bold;
            margin: 10px 0;
        }
        
        .quick-links {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .quick-link-card {
            background: white;
            border: 2px solid {{ team_info.primary_color }};
            border-radius: 10px;
            padding: 20px;
            text-align: center;
            transition: all 0.3s ease;
            text-decoration: none;
            color: inherit;
        }
        
        .quick-link-card:hover {
            background: {{ team_info.primary_color }};
            color: white;
            transform: translateY(-5px);
            box-shadow: 0 6px 12px rgba(0,0,0,0.15);
        }
        
        .quick-link-card i {
            font-size: 2em;
            margin-bottom: 10px;
            color: {{ team_info.primary_color }};
        }
        
        .quick-link-card:hover i {
            color: white;
        }
        
        .quick-link-card h3 {
            margin: 10px 0 5px 0;
            font-size: 1.2em;
        }
        
        .quick-link-card p {
            margin: 0;
            font-size: 0.9em;
            opacity: 0.8;
        }
        
        .data-section {
            background: white;
            border-radius: 10px;
            padding: 25px;
            margin-bottom: 25px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .data-section h2 {
            color: {{ team_info.primary_color }};
            border-bottom: 3px solid {{ team_info.primary_color }};
            padding-bottom: 10px;
            margin-bottom: 20px;
        }
        
        .fpa-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }
        
        .fpa-card {
            background: linear-gradient(135deg, #f5f5f5 0%, #e8e8e8 100%);
            border-left: 4px solid {{ team_info.primary_color }};
            padding: 15px;
            border-radius: 5px;
        }
        
        .fpa-card .position {
            font-weight: bold;
            font-size: 1.1em;
            color: {{ team_info.primary_color }};
        }
        
        .fpa-card .value {
            font-size: 2em;
            font-weight: bold;
            margin: 10px 0;
        }
        
        .fpa-card .label {
            font-size: 0.85em;
            opacity: 0.7;
        }
        
        .roster-stats {
            display: flex;
            justify-content: space-around;
            flex-wrap: wrap;
            gap: 20px;
            margin-top: 20px;
        }
        
        .roster-stat {
            text-align: center;
        }
        
        .roster-stat .number {
            font-size: 2.5em;
            font-weight: bold;
            color: {{ team_info.primary_color }};
        }
        
        .roster-stat .label {
            font-size: 1em;
            opacity: 0.7;
        }
        
        .no-data {
            text-align: center;
            padding: 40px;
            color: #999;
            font-style: italic;
        }
    </style>
</head>
<body>
    <div id="header"></div>
    <div id="nfl_navbar"></div>
    
    <!-- Team Header -->
    <div class="team-header">
        <div class="team-header-content">
            <img src="{{ team_info.logo }}" alt="{{ team_info.name }} logo" class="team-logo-large">
            <div class="team-info-text">
                <h1>{{ team_info.name }}</h1>
                <div class="division">{{ team_info.division }}</div>
                {% if team_info.record %}
                <div class="record">Record: {{ team_info.record }} ({{ team_info.games_played }} games)</div>
                {% endif %}
            </div>
        </div>
    </div>
    
    <!-- Quick Links -->
    <div class="quick-links">
        <a href="{{ url_for('team_schedule', team=team, fullname=team_info.name) }}" class="quick-link-card">
            <i class="fas fa-calendar-alt"></i>
            <h3>Schedule</h3>
            <p>View full schedule</p>
        </a>
        
        <a href="{{ url_for('roster', team=team, fullname=team_info.name) }}" class="quick-link-card">
            <i class="fas fa-users"></i>
            <h3>Roster</h3>
            <p>Team players</p>
        </a>
        
        <a href="{{ url_for('team_results', team=team, fullname=team_info.name) }}" class="quick-link-card">
            <i class="fas fa-chart-line"></i>
            <h3>Results</h3>
            <p>Game results</p>
        </a>
        
        <a href="{{ url_for('team_fpa', team=team, fullname=team_info.name) }}" class="quick-link-card">
            <i class="fas fa-shield-alt"></i>
            <h3>FPA Stats</h3>
            <p>Fantasy points against</p>
        </a>
        
        {% if has_snap_counts %}
        <a href="{{ url_for('team_snap_counts', team=team, fullname=team_info.name) }}" class="quick-link-card">
            <i class="fas fa-stopwatch"></i>
            <h3>Snap Counts</h3>
            <p>Player snap data</p>
        </a>
        {% endif %}
        
        {% if has_opportunity_data %}
        <a href="{{ url_for('team_opportunities', team=team) }}" class="quick-link-card">
            <i class="fas fa-bullseye"></i>
            <h3>Opportunities</h3>
            <p>Target & carry trends</p>
        </a>
        {% endif %}
    </div>
    
    <!-- Recent Games -->
    {% if schedule_data %}
    <div class="data-section">
        <h2><i class="fas fa-calendar-check"></i> Recent Games</h2>
        {{ schedule_data | safe }}
    </div>
    {% endif %}
    
    <!-- Fantasy Points Against -->
    {% if fpa_summary %}
    <div class="data-section">
        <h2><i class="fas fa-shield-alt"></i> Fantasy Points Against (Season Avg)</h2>
        <div class="fpa-grid">
            <div class="fpa-card">
                <div class="position">QB</div>
                <div class="value">{{ fpa_summary.QB }}</div>
                <div class="label">pts/game</div>
            </div>
            <div class="fpa-card">
                <div class="position">RB</div>
                <div class="value">{{ fpa_summary.RB }}</div>
                <div class="label">pts/game</div>
            </div>
            <div class="fpa-card">
                <div class="position">WR</div>
                <div class="value">{{ fpa_summary.WR }}</div>
                <div class="label">pts/game</div>
            </div>
            <div class="fpa-card">
                <div class="position">TE</div>
                <div class="value">{{ fpa_summary.TE }}</div>
                <div class="label">pts/game</div>
            </div>
        </div>
    </div>
    {% endif %}
    
    <!-- Roster Summary -->
    {% if roster_summary %}
    <div class="data-section">
        <h2><i class="fas fa-users"></i> Roster Overview</h2>
        <div class="roster-stats">
            <div class="roster-stat">
                <div class="number">{{ roster_summary.total_players }}</div>
                <div class="label">Total Players</div>
            </div>
            <div class="roster-stat">
                <div class="number">{{ roster_summary.active_players }}</div>
                <div class="label">Active Players</div>
            </div>
        </div>
    </div>
    {% endif %}
    
    {% if not schedule_data and not fpa_summary and not roster_summary %}
    <div class="data-section">
        <div class="no-data">
            <i class="fas fa-exclamation-circle" style="font-size: 3em; margin-bottom: 20px;"></i>
            <p>No data available for {{ selected_year }} season.</p>
            <p>Click "Update {{ selected_year }} Data" in the NFL Home page to load data.</p>
        </div>
    </div>
    {% endif %}
    
</body>
</html>